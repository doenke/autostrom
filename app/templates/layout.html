<script>
  async function deleteLastEntry(event) {
    event.preventDefault();
    if (!confirm('Willst du wirklich den letzten Eintrag löschen?')) {
      return;
    }
    try {
      const response = await fetch('/delete-last', { method: 'POST' });
      const result = await response.json();
      alert(result.message);
      if (result.success) {
        window.location.reload();
      }
    } catch (error) {
      alert('Fehler beim Löschen: ' + error);
    }
  }

  document.addEventListener('DOMContentLoaded', () => {
    const deleteForm = document.getElementById('delete-form');
    if (deleteForm) {
      deleteForm.addEventListener('submit', deleteLastEntry);
    }
  });
</script>